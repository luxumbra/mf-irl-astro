---
import CallToAction from "~/components/widgets/CallToAction.astro";
import Plants from "../widgets/Plants.astro";
import { CountdownTimer } from "~/components/widgets/CountdownTimer";
import { DateTime } from "luxon";
import { FAQ_URL, eventStartDate } from "~/config.mjs";
import Section from "~/components/core/Section.astro";
import { Icon } from "astro-icon";

export const isLive = DateTime.now() > DateTime.fromISO(eventStartDate);
export const expiredMessage = `MetaFest has finished!

 You can join in the post event discussion on [Telegram](https://t.me/+qIDukhuLnwg5ZTI0) and watch all the talks on [YouTube](https://www.youtube.com/c/metamedia). A gallery of photos & videos will be added to the site soon™️

 `;
---

<Section sectionId="join">
  <div class="section__content relative z-20">
    <h4
      class="text-4xl 3xl:text-6xl font-heading invisible mb-10 xl:mb-14"
      x-show="shown"
      x-bind:class="{ 'invisible': !shown, 'visible': shown }"
      x-transition:enter="transition ease-out duration-200"
      x-transition:enter-start="opacity-0 transform translate-y-8"
      x-transition:enter-end="opacity-100 transform translate-y-0"
      x-transition:leave="transition ease-in duration-200"
      x-transition:leave-start="opacity-100 transform translate-y-0"
      x-transition:leave-end="opacity-0 transform translate-y-8"
    >
      MetaFest, manifest the future.
    </h4>

    <div class="w-full xl:max-w-7xl mx-auto mb-10 xl:mb-14">
      <div
        class="event-info flex flex-col md:flex-row items-start justify-between space-y-3 md:space-y-0 md:space-x-5 xl:space-x-10"
      >
        <div class="text-center w-full md:w-1/3">
          <h5 class="font-heading">What?</h5>
          <p class="text-sm xl:text-2xl text-center text-off-white capitalize">
            Talks & performances<br /> Panels & workshops<br /> games & activities
          </p>
        </div>
        <div class="text-center w-full md:w-1/3">
          <h5 class="font-heading">Where?</h5>
          <p class="text-sm xl:text-2xl text-center text-off-white">
            Fort Punta Christo<br /> Pula<br /> Croatia
          </p>
        </div>

        <div class="text-center w-full md:w-1/3">
          <h5 class="font-heading">When?</h5>
          <p
            class="text-sm xl:text-2xl mb-0 text-off-white uppercase text-center"
          >
            Warmup 11 - 15 Aug
          </p>
          <p
            class="text-sm xl:text-2xl mb-0 text-off-white font-semibold uppercase text-center"
          >
            Main event 16 - 18 Aug
          </p>
          <p
            class="text-sm xl:text-2xl mb-0 text-off-white uppercase text-center"
          >
            Bus Trip 19 - 24 Aug
          </p>
        </div>
      </div>
    </div>
    <!-- <p class="text-center text-off-white text-xl xl:text-3xl -translate-y-4">
      Not ready? Got questions? <a
        href={FAQ_URL}
        target="_blank"
        rel="nofollow"
        class="group text-primary hover:underline">Read the FAQ</a
      > then come & <a
        href="https://t.me/+qIDukhuLnwg5ZTI0"
        target="_blank"
        rel="nofollow"
        class="group text-primary hover:underline"
        >join the conversation <Icon
          name="mdi:telegram"
          className="w-8 h-8 xl:w-16 xl:h-16 inline-flex text-cyan-500"
        />
      </a>
    </p> -->
    <CountdownTimer
      to={eventStartDate}
      expiredMessage={expiredMessage}
      client:load
    />
    {isLive && <CallToAction isLive />}
    {!isLive && <CallToAction />}
  </div>

  <Plants />
</Section>

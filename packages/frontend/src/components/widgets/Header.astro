---
import './header.css';
import { motion } from 'framer-motion';
import { Icon } from 'astro-icon';
import { Icon as Iconify } from "@iconify/react";
// import ToggleTheme from '~/components/core/ToggleTheme.astro';
---

<header class="header" x-data="{ shown: false }" x-intersect="shown = true" x-intersect:end="shown = false">
	<div class="header__primary">
		<menu class="header__menu--desktop hidden xl:flex">
			<a href="/#about">About</a>
			<a href="/#location">Location</a>
			<a href="/#activities">Activities</a>
			<a href="/#start">
				<Icon name="logo" className="logo min-w-fit w-24 3xl:w-32 h-auto" />
			</a>
			<a href="/#speakers">Speakers</a>
			<a href="/#sponsors">Sponsors</a>
			<a href="/#join">Join</a>
			<div class="absolute right-5 3xl:right-5 top-1/4 -translate-y-1/4 3xl:-translate-y-0 flex items-center gap-x-3">
				<div class="tooltip tooltip-bottom tooltip-primary font-bold" data-tip="Full Schedule">
				<a
				href="/schedule"
				class="btn btn-ghost focus:outline-primary focus:text-secondary-dark hover:text-secondary-dark outline-dashed transition-all duration-200 ease-in-out rounded-full"
				><Iconify icon="mdi:calendar-outline" width="40" height="40" client:visible /> <span class="sr-only">Schedule</span></a>
			</div>
			<div class="tooltip tooltip-bottom tooltip-primary font-bold" data-tip="Buy Tickets">
			<a
				href="/tickets"
				class="group btn btn-ghost focus:outline-primary focus:text-secondary-dark hover:text-primary outline-dashed transition-all duration-200 ease-in-out rounded-full"
				><Iconify icon="mdi:ticket" class="group-hover:fill-current " width="40" height="40" client:visible /> <span class="sr-only">Tickets</span></a
			>
		</div>
			</div>
		</menu>

		<motion.a
			href="/#start"
			className="flex md:hidden w-full max-w-[75px]"
			initial={{ opacity: 0, y: 20 }}
			whileInView={{ opacity: 1, y: 0 }}
			viewport={{ once: false }}
			transition={{ duration: 0.3, delay: 0.1 }}
			aria-label="Home"
			client:load
		>
			<Icon name="logo" className="logo w-full h-auto" />
		</motion.a>
	</div>
</header>

<script>
	if (typeof window !== 'undefined') {
		const header = document.querySelector('.header');

		// function to toggle the header class on scroll
		const scrollHeader = () => {
			if (window.scrollY > 0) {
				header?.classList.add('header--scrolled');
			} else {
				header?.classList.remove('header--scrolled');
			}
		};

		window.addEventListener('scroll', scrollHeader);
	}
</script>

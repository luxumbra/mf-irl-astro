---
import { Image } from '@astrojs/image/components';
import Section from '../core/Section.astro';
import { SITE } from '~/config.mjs';
// import { Icon } from "astro-icon";

const host = import.meta.env.PUBLIC_HOSTNAME ?? SITE.origin;

const data = await fetch(`${host}/api/sponsors`).then((res) => res.json());

const { sponsorList: sponsors } = data;
---

<Section sectionId="sponsors" class="section">
  <div class="section__content invisible"
  x-show="shown"
  x-bind:class="{ 'invisible': !shown }"
  x-transition:enter="transition ease-out duration-500"
  x-transition:enter-start="opacity-0 transform translate-y-8"
  x-transition:enter-end="opacity-100 transform translate-y-0"
  x-transition:leave="transition ease-in duration-500"
  x-transition:leave-start="opacity-100 transform translate-y-0"
  x-transition:leave-end="opacity-0 transform translate-y-8"
  >
    <h2>Partners &amp; Sponsors</h2>
    <p>
      MetaFest will be organized in collaboration between MetaFam, MetaCartel & MetaAlliance as well as other local &
      global partner organizations.
    </p>
    <p class="mb-6 text-base md:text-xl 4xl:text-2xl text-center max-w-2xl 4xl:max-w-3xl mx-auto">
      Most importantly, we want you to co-create it with us&hellip;
    </p>
    <p class="mb-10 text-base md:text-xl 4xl:text-2xl text-center max-w-2xl 4xl:max-w-3xl mx-auto">
      MetaFest is a celebration of the future weâ€™re building, together&hellip;
    </p>

    <div
      class="partners-list bg-gradient-to-r from-secondary-alt via-secondary-alt to-transparent p-3 lg:p-8 border-b-2 border-l-2 border-accent rounded-2xl mt-10"
    >
      <ul class="grid grid-cols-2 lg:grid-cols-5 gap-3 lg:gap-10">
        {
          sponsors &&
            sponsors.map((sponsor) => {
              const image = `/assets/images/sponsors/${sponsor.logo}`;
              return (
                <li class="partner group rounded-2xl bg-gradient-to-br from-secondary via-secondary to-transparent text-center w-full apsect-square lg:aspect-[196/117] hover:scale-105 transition-all duration-300 ease-in-out overflow-hidden">
                  <a
                    href={sponsor.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="relative flex items-center h-full w-full text-center p-5"
                  >
                    <div class="avatar  mx-auto">
                      <div class="h-20 lg:h-24">
                        <Image
                          src={image}
                          alt={sponsor.name}
                          class="group-hover:opacity-60 transition-opacity h-full w-auto"
                          height={150}
                          aspectRatio={1}
                          fit="fill"
                        />
                      </div>
                    </div>
                    <div class="absolute flex items-center justify-center inset-0 origin-bottom h-full w-full text-white translate-y-10 opacity-0 group-hover:-translate-y-0 group-hover:opacity-100 transition-all">
                      <span class="font-bold">{sponsor.name}</span>
                    </div>
                  </a>
                </li>
              );
            })
        }
      </ul>
    </div>
  </div>
</section>
